FROM python:3-alpine

MAINTAINER James Arnold <arnold_j@lanl.gov>

# Copy files
ENV AWS_DEFAULT_REGION us-gov-west-1
ENV APP_DIR /var/www/lanlytics-api
RUN mkdir -p $APP_DIR/
WORKDIR $APP_DIR/

COPY deploy.py app.py requirements.txt utils.py message_schema.json $APP_DIR/
ADD static/ $APP_DIR/static/
ADD templates/ $APP_DIR/templates/
ADD test/ $APP_DIR/test/

RUN pip install --no-cache-dir -r requirements.txt && py.test test/
