{
  "$schema": "http://json-schema.org/draft-04/schema#",
  "title": "lanlytics API input schema",
  "type": "object",
  "additionalProperties": false,
  "required":["command"],
  "properties": {
    "stdin":  {"$ref": "#/definitions/s3_uri"},
    "stdout": {"$ref": "#/definitions/s3_uri"},
    "stderr": {"$ref": "#/definitions/s3_uri"},
    "command": {
      "type": "array",
      "items": {"$ref": "#/definitions/command"}
    },
    "input": {
      "type": "array",
      "items": {"$ref": "#/definitions/s3_uri"}
    },
    "output": {
      "type": "array",
      "items": {"$ref": "#/definitions/s3_uri"}
    },
    "test": {"type": "boolean"}
  },
  "definitions": {
    "command": {
      "type": "object",
      "additionalProperties": false,
      "required":["type", "value"],
      "properties": {
        "type": {"enum": ["input", "output", "parameter"]},
        "name": {"type": "string"},
        "value": {"type": ["string", "number"]}
      }
    },
    "s3_uri":{
      "type": "string",
      "pattern": "^s3\\:\\/\\/[a-zA-Z0-9\\-\\.]+[a-zA-Z]\\/\\S*?$"
    }
  }
}
